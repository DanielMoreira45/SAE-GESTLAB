{% extends "consul_base.html" %}
{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='../static/css/lostpassword.css') }}">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js">
</script>
<script src="{{url_for('static', filename='JavaScript/lostpassword.js')}}"></script>
{% endblock %}

{% block content %}
<h1>Mot de passe oublié ?</h1>
<p>Entrez votre adresse mail pour pouvoir réinitialiser votre mot de passe.</p>
<form class="mail-form" role="form" method="POST" action="{{ url_for('lostpassword_update') }}">
    <div class="blockfield">
        <label for="mail-field" class="mail-label"></label>
        {{ form.mail_field(class="form-control") }}
        {{ form.pass_field(class="form-control") }}
    </div>
    <div class="blockbuttons">
        <a href="{{ url_for('login') }}" id="liensBoutons"><input type="button" id="retour-bouton" value="Retour" /></a>
        <input type="submit" id="valider-bouton" value="Valider">
    </div>
</form>
{% for mesg in get_flashed_messages() %}
{% if mesg == "Utilisateur inconnu !" %}
<dialog id="redDial" open>
    <p>{{ mesg }}</p>
    <form method="dialog" id="form-dialog">
        <button id="redDialButton">OK</button>
    </form>
</dialog>
{% else %}
<script type="text/javascript">
    sendEmail();
</script>
{% endif %}
{% endfor %}
{% endblock %}